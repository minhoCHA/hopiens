<!doctype html><html><head><link rel="stylesheet"><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"></head><body><button type="button" class="btn btn-info" onclick="init()">Start</button><div id="container"><canvas id="canvas"></canvas><div id="workout"></div><div id="word"></div><div id="label-container"></div><div id="countdown"></div></div><script src="https://unpkg.com/react@16/umd/react.development.js" crossorigin></script><script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js" crossorigin></script><script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@1.3.1/dist/tf.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@teachablemachine/pose@0.8/dist/teachablemachine-pose.min.js"></script><script>const URL="../../my_model/";let model,webcam,ctx,labelContainer,maxPredictions;var totalTime=80;function updateClock(){document.getElementById("countdown").innerHTML=totalTime,0==totalTime?document.getElementById("workout").innerHTML="Done":80>=totalTime&&totalTime>70||60>=totalTime&&totalTime>50||40>=totalTime&&totalTime>30||20>=totalTime&&totalTime>10?(document.getElementById("workout").innerHTML="Breath",totalTime-=1,setTimeout("updateClock()",1e3)):70>=totalTime&&totalTime>60?(document.getElementById("workout").innerHTML="Left Neck",totalTime-=1,setTimeout("updateClock()",1e3)):50>=totalTime&&totalTime>40?(document.getElementById("workout").innerHTML="Right Neck",totalTime-=1,setTimeout("updateClock()",1e3)):30>=totalTime&&totalTime>20?(document.getElementById("workout").innerHTML="Back Neck",totalTime-=1,setTimeout("updateClock()",1e3)):10>=totalTime&&totalTime>0?(document.getElementById("workout").innerHTML="Front Neck",totalTime-=1,setTimeout("updateClock()",1e3)):(totalTime-=1,setTimeout("updateClock()",1e3))}async function init(){model=await tmPose.load("../../my_model/model.json","../../my_model/metadata.json"),maxPredictions=model.getTotalClasses();webcam=new tmPose.Webcam(500,500,!0),await webcam.setup(),await webcam.play(),window.requestAnimationFrame(loop);const e=document.getElementById("canvas");e.width=500,e.height=500,ctx=e.getContext("2d"),labelContainer=document.getElementById("label-container");for(let e=0;e<maxPredictions;e++)labelContainer.appendChild(document.createElement("div"));updateClock()}async function loop(e){webcam.update(),await predict(),window.requestAnimationFrame(loop)}async function predict(){const{pose:e,posenetOutput:t}=await model.estimatePose(webcam.canvas),o=await model.predict(t);80>=totalTime&&totalTime>75?document.getElementById("word").innerHTML="Inhale":85>=totalTime&&totalTime>70?document.getElementById("word").innerHTML="Exhale":70>=totalTime&&totalTime>60&&("neck_left"==o[0].className&&o[0].probability.toFixed(2)>.9?document.getElementById("word").innerHTML="GOOD!":document.getElementById("word").innerHTML="Stay Focus!"),drawPose(e)}function drawPose(e){if(webcam.canvas&&(ctx.drawImage(webcam.canvas,0,0),e)){const t=.5;tmPose.drawKeypoints(e.keypoints,t,ctx),tmPose.drawSkeleton(e.keypoints,t,ctx)}}</script><script src="main.bundle.js"></script></body></html>